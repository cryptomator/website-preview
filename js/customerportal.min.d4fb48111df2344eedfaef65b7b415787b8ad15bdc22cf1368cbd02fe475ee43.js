"use strict";const REQUEST_CUSTOMER_PORTAL_URL="https://api.cryptomator.org/stripe/request_customer_portal.php";class CustomerPortal{constructor(e,t,n){this._form=e,this._feedbackData=t,this._submitData=n}request(){if(!$(this._form)[0].checkValidity()){$(this._form).find(":input").addClass("show-invalid"),this._feedbackData.errorMessage="Please fill in all required fields.";return}this._feedbackData.inProgress=!0,this._feedbackData.errorMessage="",this._feedbackData.success=!1,$.ajax({url:REQUEST_CUSTOMER_PORTAL_URL,type:"POST",data:this._submitData}).done(e=>{this.onRequestSucceeded()}).fail(e=>{this.onRequestFailed(e.responseJSON?.message||"Requesting supporter certificate failed.")})}onRequestFailed(e){this._feedbackData.success=!1,this._feedbackData.inProgress=!1,this._feedbackData.errorMessage=e}onRequestSucceeded(){this._feedbackData.success=!0,this._feedbackData.inProgress=!1,this._feedbackData.errorMessage=""}}